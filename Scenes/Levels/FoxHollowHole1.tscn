[gd_scene load_steps=19 format=3 uid="uid://d2fcd536x0n18"]

[ext_resource type="Script" uid="uid://dm68lcvq6qel5" path="res://Scripts/Systems/ArcherySystem.cs" id="1_swing"]
[ext_resource type="PackedScene" uid="uid://b5k8q8q8q8q8" path="res://Scenes/Entities/Arrow.tscn" id="2_ball"]
[ext_resource type="PackedScene" uid="uid://c6u7q8q8q8q8" path="res://Scenes/UI/HUD.tscn" id="3_hud_scene"]
[ext_resource type="Script" uid="uid://nxdsvm1xh80" path="res://Scripts/Systems/CameraController.cs" id="5_camera"]
[ext_resource type="Script" uid="uid://c6nnxkn1no5sy" path="res://Scripts/Systems/WindSystem.cs" id="7_wind"]
[ext_resource type="Script" uid="uid://c78rj73wym8kb" path="res://Scripts/Systems/PlayerController.cs" id="9_player"]
[ext_resource type="Script" uid="uid://dray5mi350m3q" path="res://Scripts/Systems/AimAssist.cs" id="10_aim"]
[ext_resource type="Script" uid="uid://cqv2uyvt2dx6d" path="res://Scripts/Systems/HeightmapTerrain.cs" id="11_terrain"]
[ext_resource type="Script" uid="uid://borpit5qwrplr" path="res://Scripts/Levels/FoxHollowGenerator.cs" id="12_generator"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1"]
sky_top_color = Color(0.384314, 0.454902, 0.54902, 1)

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("ProceduralSkyMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_Player"]
radius = 0.3
height = 1.8

[sub_resource type="StandardMaterial3D" id="Mat_AimLine"]
transparency = 1
albedo_color = Color(0, 0.5, 1, 0.5)
emission_enabled = true
emission = Color(0, 0.5, 1, 1)
emission_energy_multiplier = 2.0

[sub_resource type="CylinderMesh" id="CylinderMesh_AimLine"]
material = SubResource("Mat_AimLine")
top_radius = 0.05
bottom_radius = 0.05
height = 1.0

[sub_resource type="StandardMaterial3D" id="Mat_Marker"]
transparency = 1
albedo_color = Color(1, 0, 0, 0.4)

[sub_resource type="CylinderMesh" id="CylinderMesh_Marker"]
material = SubResource("Mat_Marker")
top_radius = 2.0
bottom_radius = 2.0
height = 0.05

[sub_resource type="CapsuleMesh" id="CapsuleMesh_Avatar"]
radius = 0.25
height = 1.8

[node name="FoxHollowHole1" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 50, 0)
shadow_enabled = true

[node name="HeightmapTerrain" type="StaticBody3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("11_terrain")
GridDepth = 400

[node name="CollisionShape3D" type="CollisionShape3D" parent="HeightmapTerrain"]

[node name="FoxHollowGenerator" type="Node" parent="."]
script = ExtResource("12_generator")
TerrainPath = NodePath("../HeightmapTerrain")
PlayerPath = NodePath("../PlayerPlaceholder")

[node name="PlayerPlaceholder" type="CharacterBody3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 100, 0.5, 20)
collision_mask = 2
script = ExtResource("9_player")
CameraPath = NodePath("Camera3D")
ArcherySystemPath = NodePath("../ArcherySystem")

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerPlaceholder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
shape = SubResource("CapsuleShape3D_Player")

[node name="AimAssist" type="Node3D" parent="PlayerPlaceholder"]
script = ExtResource("10_aim")

[node name="AimLine" type="MeshInstance3D" parent="PlayerPlaceholder/AimAssist"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0.5)
mesh = SubResource("CylinderMesh_AimLine")

[node name="LandingMarker" type="MeshInstance3D" parent="PlayerPlaceholder/AimAssist"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 274.32)
mesh = SubResource("CylinderMesh_Marker")

[node name="AvatarMesh" type="MeshInstance3D" parent="PlayerPlaceholder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
mesh = SubResource("CapsuleMesh_Avatar")

[node name="Camera3D" type="Camera3D" parent="PlayerPlaceholder"]
transform = Transform3D(1, 0, 0, 0, 0.939693, 0.34202, 0, -0.34202, 0.939693, 0, 2.5, 4.5)
script = ExtResource("5_camera")
TargetPath = NodePath("../../Arrow")

[node name="WindSystem" type="Node" parent="."]
script = ExtResource("7_wind")

[node name="ArcherySystem" type="Node" parent="."]
script = ExtResource("1_swing")
ArrowPath = NodePath("../Arrow")
CameraPath = NodePath("../PlayerPlaceholder/Camera3D")
WindSystemPath = NodePath("../WindSystem")




[node name="HUD" parent="." instance=ExtResource("3_hud_scene")]
ArcherySystemPath = NodePath("../ArcherySystem")
PlayerPath = NodePath("../PlayerPlaceholder")
